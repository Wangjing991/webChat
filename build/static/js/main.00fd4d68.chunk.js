(this["webpackJsonptypescript-react-starter"]=this["webpackJsonptypescript-react-starter"]||[]).push([[0],{117:function(e,t){},139:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(35),c=n.n(i),o=n(13),s=(n(88),n(7)),l=n(27),u=n(18),p=n(2),f=n(3),m=n(5),d=n(4),h=n(6),_=n(21),g=n.n(_),b=n(14),v=n.n(b),O=n(46),y=n.n(O),j=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).loadAvatar=function(e){return e},n}return Object(h.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.src,n=e.cls,a=e.uid,i=void 0===a?1:a,c=e.name,o=this.props.doNotUseDefault;t||this.loadAvatar(i);t&&(o=!0);var s=i%5+1;return r.a.createElement("div",{className:v()(y.a.avatar,n)},o?null:r.a.createElement("div",{className:v()(y.a.default,"bg-r".concat(s))},c&&c.slice(-2)))}}]),t}(r.a.Component),E=function(e){function t(){return Object(p.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.src,e.cls,e.uid,e.name),n=e.msg,a=e.time;return r.a.createElement("div",{className:g.a.item},r.a.createElement(j,{cls:g.a.left,name:t}),r.a.createElement("div",{className:g.a.right},r.a.createElement("p",{className:g.a.time},a),n))}}]),t}(r.a.Component),x=function(e){function t(){return Object(p.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.src,e.cls,e.uid,e.name,this.props.msgList);return r.a.createElement("div",{className:g.a.container},t.length?t.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r.a.createElement(E,{time:e.time,name:e.username,uid:e.id,msg:e.content})})):null)}}]),t}(r.a.Component),C=n(37),k=n(17),N=n(23),w=n(19),I=n.n(w);var L=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(m.a)(this,Object(d.a)(t).call(this,e))).input=void 0,n.saveInput=function(e){n.input=e},n.keyDownHandler=n.keyDownHandler.bind(Object(N.a)(n)),n}return Object(h.a)(t,e),Object(f.a)(t,[{key:"keyDownHandler",value:function(e){var t=this.props,n=t.onPressEnter,a=t.onKeyDown;13===e.keyCode&&n&&n(e),a&&a(e)}},{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"renderAffixInput",value:function(e){var t,n=this.props,a=n.prefix,i=n.suffix,c=n.cls,o=v()((t={},Object(k.a)(t,I.a.affix_input,!0),Object(k.a)(t,I.a.prefix_input,a),Object(k.a)(t,I.a.suffix_input,i),t));return r.a.createElement("span",{className:o},a?r.a.createElement("span",{className:I.a.prefix},a):null,r.a.createElement("input",Object.assign({ref:this.saveInput,className:v()(I.a.input,c)},e)),i?r.a.createElement("span",{className:I.a.suffix},i):null)}},{key:"render",value:function(){var e=this.props,t=e.cls,n=e.prefix,a=e.suffix,i=Object(C.a)(e,["cls","prefix","suffix"]);return"value"in this.props&&(i.value=this.props.value,delete i.defaultValue),n||a?this.renderAffixInput(i):r.a.createElement("input",Object.assign({ref:this.saveInput,className:v()(I.a.input,t)},i,{onKeyDown:this.keyDownHandler}))}}]),t}(a.Component),A=n(75),B=n.n(A),U=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){var t=n.props.onChange;t&&t(e.target.value)},n}return Object(h.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:B.a.container},r.a.createElement(L,{onChange:this.handleChange,value:this.props.value}))}}]),t}(r.a.Component),D=n(20),S=n.n(D),T=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(m.a)(this,Object(d.a)(t).call(this,e))).clickHandler=n.clickHandler.bind(Object(N.a)(n)),n}return Object(h.a)(t,e),Object(f.a)(t,[{key:"clickHandler",value:function(){var e=this.props,t=e.onClick,n=e.disabledWhenLoading;e.loading&&n||t&&t()}},{key:"render",value:function(){var e,t=this.props,n=t.type,a=t.loading,i=t.children,c=t.cls,o=t.size,s=void 0===o?"middle":o,l=(t.htmlType,t.isGroup),u=Object(C.a)(t,["type","loading","children","cls","size","htmlType","isGroup"]),p=v()(S.a.btn,[S.a[n]],[S.a[s]],(e={},Object(k.a)(e,S.a.loading,a),Object(k.a)(e,S.a.in_group,l),e),c);return r.a.createElement("button",Object.assign({className:p,onClick:this.clickHandler},u),a?r.a.createElement("i",{className:v()(S.a.iconfont,S.a["icon-loading"])}):null,i)}}]),t}(a.Component),H={msgList:[]},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"HOME_UPDATE_COUNT":var r=e.msgList,i=void 0===r?[]:r;return console.log(i.concat(a),"msgList.concat(payload)",a),Object(s.a)({},e,{msgList:i.concat(a)});default:return Object(s.a)({},e)}},M=n(76),R=n.n(M),z=n(47),G=n.n(z),J=R()("http://111.229.251.78:8003/"),F=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={message:""},n.handleChange=function(e){n.setState({message:e})},n.sendMsg=function(){var e=n.state.message;J.emit("chat",{user_id:n.props.global.userId,content:e})},n}return Object(h.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;J.on("chat",(function(t){console.log(t,"socket-chat"),e.props.updateMsgList(t),e.setState({message:""})}))}},{key:"render",value:function(){var e=this.props.msgList;return r.a.createElement("div",{className:G.a.container},r.a.createElement(x,{msgList:e}),r.a.createElement(U,{onChange:this.handleChange,value:this.state.message}),r.a.createElement("div",{className:G.a.btn},r.a.createElement(T,{type:"primary",size:"small",onClick:this.sendMsg},"\u53d1\u9001")))}}]),t}(r.a.Component),K={updateMsgList:function(e){return{type:"HOME_UPDATE_COUNT",payload:e}},asyncUpdateCount:function(e){return function(t){setTimeout((function(){t({type:"HOME_UPDATE_COUNT",payload:e+1})}),1e3)}}},W=Object(o.b)((function(e){return Object(s.a)({global:e.global},e.homePage)}),K)(F),Q=n(25),X=n.n(Q),Z=n(29),Y=n.n(Z);Y.a.defaults.baseURL="http://111.229.251.78:8003/",Y.a.interceptors.response.use((function(e){return console.log(e,"axios.interceptors"),e.data}));var q=function(e,t){return Y.a.get(e,{params:t})},V=function(e){return q("user/login",e)},$=function(e){return q("user/register",e)},ee={},te=function(e){ee=e,localStorage.setItem("LOCAL_STORAGE_USERINFO",JSON.stringify(e))},ne=function(){if(Object.keys(ee).length)return ee;var e=localStorage.getItem("LOCAL_STORAGE_USERINFO");if(e)try{var t=JSON.parse(e);return ee=t}catch(n){}return{}}();console.log(ne,"userInfo");var ae={userId:ne.userId,userName:ne.userName},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"GLOBAL_UPDATE_USERID":return te(a),console.log(a,"payload"),Object(s.a)({},e,{},a);default:return Object(s.a)({},e)}},ie=n(48),ce=n.n(ie),oe=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).data={},n.onClick=function(){var e;return X.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(n.props,"location"),t.next=3,X.a.awrap(V(n.data));case 3:200===(e=t.sent).status&&(n.props.updateUserId(e.user_info.id,e.user_info.name),n.props.history.push("/")),alert(e&&e.message);case 6:case"end":return t.stop()}}))},n.onChange=function(e,t){n.data[e]=t.target.value,console.log(t.target.value,"onChange")},n}return Object(h.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:ce.a.container},r.a.createElement(L,{type:"text",placeholder:"\u7528\u6237\u540d",onChange:this.onChange.bind(this,"username"),style:{marginBottom:"10px"}}),r.a.createElement(L,{type:"password",placeholder:"\u5bc6\u7801",onChange:this.onChange.bind(this,"password"),style:{marginBottom:"10px"}}),r.a.createElement(l.b,{to:"/register",style:{float:"left"}},"\u7acb\u5373\u6ce8\u518c"),r.a.createElement("div",{className:ce.a.btn},r.a.createElement(T,{type:"primary",size:"small",onClick:this.onClick},"\u767b\u5f55")))}}]),t}(r.a.Component),se={updateUserId:function(e,t){return{type:"GLOBAL_UPDATE_USERID",payload:{userId:e,userName:t}}}},le=Object(u.e)(Object(o.b)((function(e){return Object(s.a)({global:e.global},e.homePage)}),se)(oe)),ue=n(51),pe=n.n(ue),fe=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).data={},n.onClick=function(){var e;return X.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.props.history,t.next=3,X.a.awrap($(n.data));case 3:0!==t.sent.code&&e.push("./login");case 5:case"end":return t.stop()}}))},n.onChange=function(e,t){n.data[e]=t.target.value,console.log(t.target.value,"onChange")},n}return Object(h.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:pe.a.container},r.a.createElement(L,{type:"text",placeholder:"\u7528\u6237\u540d",onChange:this.onChange.bind(this,"username"),style:{marginBottom:"10px"}}),r.a.createElement(L,{type:"password",placeholder:"\u5bc6\u7801",onChange:this.onChange.bind(this,"password"),style:{marginBottom:"10px"}}),r.a.createElement("div",{className:pe.a.btn},r.a.createElement(T,{type:"primary",size:"small",onClick:this.onClick},"\u6ce8\u518c")))}}]),t}(r.a.Component),me=Object(u.e)(Object(o.b)((function(e){return Object(s.a)({global:e.global},e.homePage)}),{})(fe)),de=function(){Object(o.d)((function(e){return Object(s.a)({},e.global)})),Object(o.c)();return r.a.createElement(l.a,null,r.a.createElement(u.a,{exact:!0,path:"/",component:W}),r.a.createElement(u.a,{exact:!0,path:"/login",component:le}),r.a.createElement(u.a,{exact:!0,path:"/register",component:me}))},he=n(24),_e=(n(138),n(78)),ge=Object(he.c)({global:re,homePage:P}),be=function(){return Object(he.d)(ge,Object(he.a)(_e.a))}();window.TRS_STORE=be,c.a.render(r.a.createElement(o.a,{store:be},r.a.createElement(de,null)),document.getElementById("root"))},19:function(e,t,n){e.exports={input:"Input_input__SCFHN",affix_input:"Input_affix_input__3kubb",prefix_input:"Input_prefix_input__1Q-wP",prefix:"Input_prefix__3QSE6",suffix_input:"Input_suffix_input__2ZxwZ",suffix:"Input_suffix__2pHyS"}},20:function(e,t,n){e.exports={iconfont:"Button_iconfont__3zoME","icon-loading":"Button_icon-loading__FO-eS",loadingCircle:"Button_loadingCircle__StONJ",btn:"Button_btn__1iklE",normal:"Button_normal__gxfXj",loading:"Button_loading___7u6u",in_group:"Button_in_group__2KFD1",primary:"Button_primary__3U5oy",text:"Button_text__3UvNg",small:"Button_small__4DYQu",middle:"Button_middle__6OBa8",large:"Button_large__1K9uC"}},21:function(e,t,n){e.exports={container:"List_container__2OosZ",item:"List_item__1y8N8",left:"List_left__KqN5s",right:"List_right__28ilk",time:"List_time__v5igY"}},46:function(e,t,n){e.exports={avatar:"Avatar_avatar__TDntD",bg:"Avatar_bg__2X89u",default:"Avatar_default__sg-TN"}},47:function(e,t,n){e.exports={container:"style_container__1WWpg",btn:"style_btn__3sneX"}},48:function(e,t,n){e.exports={container:"style_container__3UGcz",btn:"style_btn__2MiBi"}},51:function(e,t,n){e.exports={container:"style_container__1pcsJ",btn:"style_btn__2i1Ww"}},75:function(e,t,n){e.exports={container:"Editor_container__-do5t"}},79:function(e,t,n){e.exports=n(139)},88:function(e,t,n){}},[[79,1,2]]]);
//# sourceMappingURL=main.00fd4d68.chunk.js.map